<!--WIDGET 
Widget créé par @domosolution67
Widget maintenu par @domosolution67

Changelog :
- 31/07/2019 : Création

Instruction :
Widget permettant de mettre une commande en couleur en fonction de sa valeur.
Appliquer uniquement sur commande de type Info et de Sous-type Numérique
Mettre dans les Paramètres optionnels widget les options suivantes : 
couleur1 -> Couleur numéro 1, couleur appliquée à la valeur de la commande lorsque la valeur est en dessous du paramètre opionnel mini (voir plus bas)
couleur2 -> Couleur numéro 2, cette couleur sera appliquée sur la valeur de la commande lorsque la valeur sera entre les paramètre opionnel mini et maxi (voir plus bas)
couleur3 -> Couleur numéro 3, cette couleur sera appliquée sur la valeur de la commande lorsque la valeur sera au dessus du paramètre opionnel max (voir plus bas)
min	-> Valeur en dessous de laquel la couleur sera de la couleur1
max -> Valeur au dessus de laquel la valeur de la commande sera de la couleur3
taille_ecriture -> Taille d'écriture de la valeur de la commande
CES PARAMETRES SONT A METTRE SUR CHAQUES COMMANDES OU EST APPLIQUE LE WIDGET
Paramètre possible pour couleur1, couleur2 et couleur3 : black, white, blue, red, green, etc..)

Pour la mise en place des paramètres optionnels widget, se référer à la doc du pluging widget https://jeedom.github.io/plugin-widget/fr_FR/#tocAnchor-1-3 paragraphe 4.3 à la ligne "Ajouter une option personnalisée"
-->
<div  style="padding:0;width:30px;min-height:30px;" class="cmd #history# container-fluid tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#id#" data-cmd_uid="#uid#" data-version="#version#">
    <div>
        <span class="spanCmd#id#" style="font-size: #taille_ecriture#pt;font-weight: bold;">#state#</span>
    </div>
    <script>
    jeedom.cmd.update['#id#'] = function(_options) {
      	var valeur = _options.display_value;
		var iconUpdate#uid# = function (state){
		$('.cmd[data-cmd_uid=#uid#] .iconCmd').empty();
		if (state <= ('#min#')) {
		$(".spanCmd#id#").html(valeur)
     	$(".spanCmd#id#").css( "color", '#couleur1#' )}
		if (state > ('#min#') && state < ('#max#')) {
		$(".spanCmd#id#").html(valeur);
        $(".spanCmd#id#").css( "color", '#couleur2#' )}
		if (state >= ('#max#')) {
		$(".spanCmd#id#").html(valeur);
      	$(".spanCmd#id#").css( "color", '#couleur3#' )}
		$('.cmd[data-cmd_uid=#uid#] .state').text(state);};
		iconUpdate#uid#(_options.display_value);}
      
    jeedom.cmd.update['#id#']({display_value:'#state#',valueDate:'#valueDate#',collectDate:'#collectDate#'});
    </script>
</div>
