<!--WIDGET 
Widget créé par @domosolution67
Widget maintenu par @domosolution67

Changelog :
- 05/08/2019 : Création

Instruction :
Widget permettant d'affiche des images sur le dashboard jeedom
Crée un equipement virtuel sur lequel appliquer ce widget.
Appliquer uniquement sur commande de type Info et de Sous-type Autre
Les sources d'image peuvent être de type .Jpeg .Gif .png (d'autres formats peuvent être compatibles, je n'ai pas fais de test avec d'autres formats)
Mettre dans les Paramètres optionnels widget les options suivantes : 
srcImg -> Source de l'image. Peux être une source local (image enregistré sous jeedom ou un nas etc ATTENTION BIEN CONSERVE LE HTTP OU HTTPS DEVANT LE LIEN) ou une source externe (exemple icone jeedom : https://jeedom.github.io/plugin-widget/assets/images/logo.png)
width -> Largueur de l'image
height -> Hauteur de l'image

CES PARAMETRES SONT A METTRE SUR CHAQUES COMMANDES OU EST APPLIQUE LE WIDGET
Pour la mise en place des paramètres optionnels widget, se référer à la doc du pluging widget https://jeedom.github.io/plugin-widget/fr_FR/#tocAnchor-1-3 paragraphe 4.3 à la ligne "Ajouter une option personnalisée"
-->
<div  style="padding:100;width:100px;min-height:30px;" class="cmd #history# container-fluid tooltips cmd cmd-widget" data-type="info" data-subtype="numeric" data-cmd_id="#id#" data-cmd_uid="#uid#" data-version="#version#">
    <div>
        <div class="center-block col-xs-12 h5 cmdName" id="cmdName#id#" style="margin-top:0; #hideCmdName#;">#state#</div>
        <div class="iconCmd" style="center-block col-xs-12;"></div>
    </div>
<!-- Ne Pas Supprimer -->
	<script class="createWidgetInfo" type="text/javascript">//<![CDATA[{"type":"1","version":"1","size":"2.5","min":["0","101","103"],"max":["100","102","104"],"images":[]}]]></script>
<!-- Ne Pas Supprimer -->
  <script>
	var iconUpdate = function (state){
      $('.cmd[data-cmd_uid=#uid#] .iconCmd').empty();
      if (state != "") {
      $('.cmd[data-cmd_uid=#uid#] .iconCmd').append('<img style="display: block;" src="plugins/widget/core/images/antisabotageNOK.png">');
      $(".spanCmd#id#").html(state);
      $(".spanCmd#id#").css();
      }
      else if (state == "") {
      $('.cmd[data-cmd_uid=#uid#] .iconCmd').empty();
      $('.cmd[data-cmd_uid=#uid#] .state').text(state);
      }
      };
	jeedom.cmd.update['#id#'] = function(_options){
		$('.cmd[data-cmd_uid=#uid#]').attr('title','Valeur du '+_options.valueDate+', collectée le '+_options.collectDate)
		iconUpdate(_options.display_value);
	}
	jeedom.cmd.update['#id#']({display_value:'#state#',valueDate:'#valueDate#',collectDate:'#collectDate#',alertLevel:'#alertLevel#'});

  </script>

</div>
